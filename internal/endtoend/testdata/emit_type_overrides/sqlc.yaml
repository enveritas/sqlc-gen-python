version: "2"
plugins:
  - name: py
    wasm:
      url: file://../../../../bin/sqlc-gen-python.wasm
      sha256: "77e9665cec6efe4e1871218c27a09143eb0f23fb509855c881757022383813e0"
sql:
  - schema: schema.sql
    queries: query.sql
    engine: postgresql
    codegen:
      - plugin: py
        out: db
        options:
          package: db
          emit_pydantic_models: true
          emit_sync_querier: true
          emit_async_querier: true
          overrides:
            - column: "books.payload"
              py_import: "my_lib.models"
              py_type: "BookPayload"
            - db_type: "jsonb"
              py_import: "my_lib.models"
              py_type: "JsonValue"
